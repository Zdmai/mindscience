# Dataset-related Files

## Pretraining Dataset

* Equation Form:

$$
\begin{split}
u_t+f_0(u)+s(x)+(f_1(u)-\kappa(x)u_x)_x&=0 , \quad (t,x) \in [0,1] \times [-1,1], \\
u(0,x) &= g(x), \quad x \in [-1,1]
\end{split}
$$

where $f_i(u) = c_{i1}u+c_{i2}u^2+c_{i3}u^3$, $i=0,1$.

* Boundary Conditions: Periodic + Non-periodic. For non-periodic case, randomly choose from Dirichlet, Neumann, Robin independently for left and right boundaries.
* Dataset path: `custom/sinus0`.
* Filename format: `custom_v4.23_sinus0_[#bc]_c[#c]_k[#k]_seed[#r].hdf5`
    * For example: `custom_v4.23_sinus0_robin_cU3_k1e-03_1_seed1.hdf5`
    * `[#bc]`: Boundary condition type (`circ` for periodic, `robin` for non-periodic including Dirichlet, Neumann and Robin).
    * `[#c]`: Non-zero coefficient distribution (default: `U3` for $[-3,3]$).
    * `[#k]`: Range of Positive Coefficient $\kappa(x)$ (default: `k1e-03` for $[10^{-3},1]$).
    * `[#r]`: Random seed, with positive integer value.
* Data generation code: [../data_generation/custom_sinus.py](../data_generation/custom_sinus.py).

## Wave equation dataset

* Equation Form: $u_{tt}+\mu u_t+Lu+bu_x+f(u)+s_T(t)s_X(x)=0$ï¼Œ$(t,x)\in[0,1]\times[-1,1]$,
    Initial Condition: $u(0,x)=g(x),u_t(0,x)=h(x)$.
    Where $f(u) = c_{1}u+c_{2}u^2+c_{3}u^3$,
    $Lu$ is chosen from the following with equal probability: $Lu=-c(x)^2u_{xx}$, $Lu=-c(x)(c(x)u_x)_x$, $Lu=-(c(x)^2u_x)_x$.
    Source Term $s_T(t)s_X(x)$ is chosen from the following with equal probability: Zero, scalar coefficient, Space-dependent coefficient, Time-dependent coefficient, Space-time-dependent coefficient.
* Boundary Conditions: Periodic + Non-periodic. For non-periodic case, randomly choose from Dirichlet, Neumann, Robin independently for left and right boundaries.
* Dataset path: `custom/wave`.
* Filename format: `custom_v4.23_wave_[#bc]_c[#c]_k[#k]_seed[#r].hdf5`
    * For example: `custom_v4.2_wave_interval_cU3_k1e-02_4_seed1.hdf5`
    * `[#bc]`: Boundary condition type, `circ` for periodic, `interval` for non-periodic.
    * `[#k]`: Range of Positive Coefficient $\kappa(x)$ (default: `k1e-02_4` for $[10^{-2},4]$).
    * Other parameters are the same as the pretraining dataset.
* Data generation code: [../data_generation/custom_wave.py](../data_generation/custom_wave.py).
* Note that the generated wave equation dataset has not been sufficiently filtered, so some samples may contain non-physical modes generated by the solver (such as high-frequency checkerboard artifact).
    We use this to demonstrate that the training process of PDEformer can tolerate some abnormal data samples, but if you wish to use this dataset for other purposes, you may need to do some additional post-processing on your own.

## Wave Function Inverse Problem Dataset

* Equation Form and Boundary Conditions: Basically same as the wave equation dataset, but the source term $s_T(t)s_X(x)$ is set to be time-space-dependent coefficient.
    For non-periodic case, the boundary conditions are set as homogeneous Mur boundary (wave outgoing) at the left endpoint and homogeneous Neumann boundary (no stress) at the right endpoint.
    Every data file contains 100 PDEs, and every PDE has 100 samples. The initial condition $g(x),h(x)$ and source term $s_T(t)s_X(x)$ varies in each sample.
* Dataset path: `custom/inverse`.
* Filename format: `custom_v4.2_inv_wave_[#bc]_c[#c]_k[#k]_seed[#r].hdf5`
    * For example: `custom_v4.2_inv_wave_interval_cU3_k1e-02_4_seed1.hdf5`
    * The meaning of `[#bc]`, `[#c]`, `[#k]`, `[#r]` is the same as the wave equation dataset.
* Data generation code: [../data_generation/inverse_wave.py](../data_generation/inverse_wave.py).

## Multi-Component Equation Dataset

* Equation Form: $\partial_tu_i + \sum_jc_{ij}u_j + s_i +\partial_x(\sum_ja_{ij}u_j + \sum_{j,k}b_{ijk}u_ju_k - \kappa_i\partial_xu_i) = 0$,
    Where $0 \le i,j,k \le d-1$, $j \le k$, $(t,x)\in[0,1]\times[-1,1]$, $d$ represents the number of components.
    The coefficients $c_{ij},a_{ij},b_{ijk}$ are all sparse matrices/ tensor, whose number of non-zero elements are independently sampled from $\{0,1,\dots,2d\}$.
* Boundary Conditions: In consideration of the complexity of the multi-component equation, we only provide periodic boundary conditions.
* Dataset path: `custom/mCompn`.
* Filename format: `custom_v4.2_compn[#d]_c[#c]_k[#k]_seed[#r].hdf5`
    * For example: `ccustom_v4.2_compn2_cU3_k1e-03_1_seed1.hdf5`
    * `[#d]`: Number of components.
    * The meaning of `[#c]`, `[#k]`, `[#r]` is the same as the pretraining dataset.
* Data generation code: [../data_generation/custom_multi_component.py](../data_generation/custom_multi_component.py).
